from main import Solution # Подключаем весь класс Solution к выводу примеров.

# Часть 2. Вывод примеров в консоль с комментариями.

# Данный класс LeetCode не принимает. Его в решении на самом LeetCode прописывать НЕ НАДО.
# Это класс для создания узлов связанного списка.
# Его надо определить в обоих файлах, чтобы не было ошибок при выводе.

# Создаём шаблон (класс) для звена цепочки (узла списка)
class ListNode:
    def __init__(self, val=0, next=None): # при создании звена:
        self.val = val # сохраняем цифру (значение)
        self.next = next # указываем на следующее звено (если оно есть)

# Функция для создания связного списка из массива чисел.
def create_linked_list(arr):
    dummy = ListNode(0)     # Создаём временное пустое звено в начале.
    current = dummy         # Указатель на текущее звено.
    for num in arr:         # Для каждого числа в массиве:
        current.next = ListNode(num) # создаём новое звено.
        current = current.next # Перемещаем указатель дальше.
    return dummy.next       # Возвращаем настоящую голову цепочки.

# Функция печати цепочки в виде: 1 -> 2 -> 3.
def print_linked_list(node):
    result = []                     # Создаём пустой список.
    while node:                     # Пока есть звенья:
        result.append(node.val)     # добавляем цифру в список.
        node = node.next            # Переходим к следующему звену.
    print(" -> ".join(map(str, result)))    # Печатаем всё по красоте со стрелочками.

# Функция тестирования одного примера.
def test_example(num1_arr, num2_arr, example_num):
    print(f"\n{'=' * 60}")
    print(f"Пример {example_num}:") # Номер примера.

    # Показываем исходные данные.
    print(f"Число 1 (в обратном порядке): {num1_arr}")
    print(f"Число 2 (в обратном порядке): {num2_arr}")

    # Преобразуем в нормальный вид для проверки.
    # Переворачиваем и собираем нормальные числа.
    num1_normal = int(''.join(map(str, reversed(num1_arr))))
    num2_normal = int(''.join(map(str, reversed(num2_arr))))

    # Выводим информацию.
    print(f"Число 1 в нормальном виде: {num1_normal}")
    print(f"Число 2 в нормальном виде: {num2_normal}")
    print(f"Ожидаемая сумма: {num1_normal + num2_normal}")

    # Создаём две цепочки из массивов.
    l1 = create_linked_list(num1_arr)
    l2 = create_linked_list(num2_arr)

    # Вызываем функцию сложения.
    solution = Solution() # Создаём экземпляр класса, запускаем скрипт.
    result = solution.addTwoNumbers(l1, l2)

    # Выводим результат.
    print("Результат (в обратном порядке): ", end="")
    print_linked_list(result)

    # Преобразуем результат в нормальное число.
    result_arr = []
    temp = result
    while temp:     # Пока есть звенья
        result_arr.append(temp.val) # собираем цифры
        temp = temp.next # и идём дальше.

    # Переворачиваем и проверяем правильность.
    result_normal = int(''.join(map(str, reversed(result_arr))))
    print(f"Результат в нормальном виде: {result_normal}")
    print(f"Правильно: {result_normal == num1_normal + num2_normal}")
    print(f"{'=' * 60}")

# Точка входа в программу и вывод результата.
if __name__ == "__main__":
    print()
    print("Тестирование сложения двух чисел, представленных в виде связных списков.")
    print("Цифры хранятся в обратном порядке!")

    # Пример 1: 342 + 465 = 807.
    test_example([2, 4, 3], [5, 6, 4], 1)

    # Пример 2: 0 + 0 = 0
    test_example([0], [0], 2)

    # Пример 3: 9999999 + 9999 = 10009998
    test_example([9, 9, 9, 9, 9, 9, 9], [9, 9, 9, 9], 3)

    # Дополнительные примеры:
    test_example([1, 2, 3], [4, 5, 6], 4)  # 321 + 654 = 975
    test_example([9, 9], [1], 5)  # 99 + 1 = 100

    # Подробное объяснение для примера 1:
    print("\n" + "=" * 60)
    print("Объяснение для примера 1 (342 + 465 = 807):")
    print("Число 1 в списке: 2 -> 4 -> 3 (это 342 в обратном порядке)")
    print("Число 2 в списке: 5 -> 6 -> 4 (это 465 в обратном порядке)")
    print()
    print("Пошаговое сложение (с конца, как в столбик):")
    print("1. 2 + 5 = 7        (записываем 7, перенос 0)")
    print("2. 4 + 6 = 10       (записываем 0, перенос 1)")
    print("3. 3 + 4 + 1 = 8    (записываем 8, перенос 0)")
    print("Результат: 7 -> 0 -> 8 (это 807 в обратном порядке)")
    print("=" * 60)